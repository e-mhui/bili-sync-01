import{d as se,c as re,h as oe,a as c,f as _,s as q}from"../chunks/tMh-h1UU.js";import{i as ie}from"../chunks/B92wWaER.js";import{p as de,o as le,l as ne,k as ce,f as B,a as ve,t as k,s as u,m as P,g as e,$ as me,c as o,r,b as f,q as M}from"../chunks/4Z14Qsdb.js";import{i as h,a as pe,c as O}from"../chunks/epDpuhXI.js";import{t as U,b as ue,a as fe,e as _e}from"../chunks/BklcvC6Y.js";import{p as ge,T as xe,a as be}from"../chunks/BSHeNFie.js";import{g as C}from"../chunks/AeIteut0.js";import{V as z}from"../chunks/DZTqjmeT.js";const he=!1,ye=!1,Oe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ye,ssr:he},Symbol.toStringTag,{value:"Module"}));var $e=_('<div class="flex items-center justify-center py-12"><div class="text-muted-foreground">加载中...</div></div>'),Se=()=>C("/"),we=_('<div class="flex items-center justify-center py-12"><div class="space-y-2 text-center"><p class="text-destructive"> </p> <button class="text-muted-foreground hover:text-foreground text-sm transition-colors">返回首页</button></div></div>'),ke=_('<div><div class="mb-4 flex items-center justify-between"><h2 class="text-xl font-semibold">分页列表</h2> <div class="text-muted-foreground text-sm"> </div></div> <div class="grid gap-4" style="grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));"></div></div>'),Pe=_('<div class="py-12 text-center"><div class="space-y-2"><p class="text-muted-foreground">暂无分P数据</p> <p class="text-muted-foreground text-sm">该视频可能为单P视频</p></div></div>'),je=_('<section><div class="mb-4 flex items-center justify-between"><h2 class="text-xl font-semibold">视频信息</h2></div> <div style="margin-bottom: 1rem;"><!></div></section> <section><!></section>',1);function Ue(H,Q){de(Q,!1);const[j,E]=pe(),y=()=>O(ge,"$page",j),F=()=>O(be,"$appStateStore",j);let t=P(null),$=P(!1),g=P(null);async function G(){const s=parseInt(y().params.id);if(isNaN(s)){u(g,"无效的视频ID"),U.error("无效的视频ID");return}u($,!0),u(g,null);try{const a=await ue.getVideo(s);u(t,a.data)}catch(a){console.error("加载视频详情失败:",a),U.error("加载视频详情失败",{description:a.message})}finally{u($,!1)}}le(()=>{fe([{label:"主页",onClick:()=>{C(`/${xe(F())}`)}},{label:"视频详情",isActive:!0}])}),ne(()=>y(),()=>{y().params.id&&G()}),ce(),ie();var D=re();oe(s=>{k(()=>{var a;return me.title=`${((a=e(t))==null?void 0:a.video.name)||"视频详情"} - Bili Sync`})});var J=B(D);{var K=s=>{var a=$e();c(s,a)},L=(s,a)=>{{var R=d=>{var v=we(),x=o(v),i=o(x),b=o(i,!0);r(i);var m=f(i,2);m.__click=[Se],r(x),r(v),k(()=>q(b,e(g))),c(d,v)},W=(d,v)=>{{var x=i=>{var b=je(),m=B(b),N=f(o(m),2),X=o(N);const Y=M(()=>({id:e(t).video.id,name:e(t).video.name,upper_name:e(t).video.upper_name,download_status:e(t).video.download_status}));z(X,{get video(){return e(Y)},mode:"detail",showActions:!0,progressHeight:"h-3",gap:"gap-2",taskNames:["视频封面","视频信息","UP主头像","UP主信息","分P下载"]}),r(N),r(m);var T=f(m,2),Z=o(T);{var I=l=>{var p=ke(),S=o(p),V=f(o(S),2),te=o(V);r(V),r(S);var A=f(S,2);_e(A,5,()=>e(t).pages,w=>w.id,(w,n)=>{const ae=M(()=>({id:e(n).id,name:`P${e(n).pid}: ${e(n).name}`,upper_name:"",download_status:e(n).download_status}));z(w,{get video(){return e(ae)},mode:"page",showActions:!1,get customTitle(){return`P${e(n).pid??""}: ${e(n).name??""}`},customSubtitle:"",taskNames:["视频封面","视频内容","视频信息","视频弹幕","视频字幕"]})}),r(A),r(p),k(()=>q(te,`共 ${e(t).pages.length??""} 个分页`)),c(l,p)},ee=l=>{var p=Pe();c(l,p)};h(Z,l=>{e(t).pages&&e(t).pages.length>0?l(I):l(ee,!1)})}r(T),c(i,b)};h(d,i=>{e(t)&&i(x)},v)}};h(s,d=>{e(g)?d(R):d(W,!1)},a)}};h(J,s=>{e($)?s(K):s(L,!1)})}c(H,D),ve(),E()}se(["click"]);export{Ue as component,Oe as universal};
