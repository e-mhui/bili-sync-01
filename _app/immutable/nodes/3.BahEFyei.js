import{b as ga,g as ct,d as _t,f as u,h as pt,e as ue,a as s,t as B,s as j,c as Ke,r as Me}from"../chunks/tMh-h1UU.js";import{i as ut}from"../chunks/B92wWaER.js";import{t as k,h as ha,D as ba,E as ft,F as xt,G as ya,H as mt,I as gt,J as ht,K as bt,L as Re,p as yt,o as wt,M as $t,l as ze,k as kt,f as Pe,g as e,m as F,a as Pt,s as n,$ as It,b as o,c as r,d as re,i as wa,r as t,q as ae}from"../chunks/4Z14Qsdb.js";import{i as _}from"../chunks/epDpuhXI.js";import{e as ge,B as he,c as $a,b as Ie,t as V,a as Dt,i as be,g as ve,h as ye,j as Ut,r as ka,k as St}from"../chunks/BklcvC6Y.js";import{I as De,b as Tt}from"../chunks/t8x5iSCf.js";import{L as pe}from"../chunks/VF2rYq1k.js";import{g as Pa}from"../chunks/AeIteut0.js";import{S as jt}from"../chunks/CFKmMrXd.js";import{X as Bt}from"../chunks/BoW7udwR.js";function Ia(se,K,A=!1,d=!1,N=!1){var Z=se,G="";k(()=>{var oe=ft;if(G===(G=K()??"")){ha&&ba();return}if(oe.nodes_start!==null&&(xt(oe.nodes_start,oe.nodes_end),oe.nodes_start=oe.nodes_end=null),G!==""){if(ha){ya.data;for(var J=ba(),le=J;J!==null&&(J.nodeType!==8||J.data!=="");)le=J,J=mt(J);if(J===null)throw gt(),ht;ga(ya,le),Z=bt(J);return}var ne=G+"";A?ne=`<svg>${ne}</svg>`:d&&(ne=`<math>${ne}</math>`);var te=ct(ne);if((A||d)&&(te=Re(te)),ga(Re(te),te.lastChild),A||d)for(;Re(te);)Z.before(Re(te));else Z.before(te)}})}function Ct(se,K,A){e(K)&&A(se)}var Mt=u("<option> </option>"),Rt=u('<div class="p-4 bg-blue-50 rounded-lg border border-blue-200"><div class="space-y-2"><div><!> <div class="flex gap-2 mt-2"><!> <!></div> <p class="text-xs text-gray-600 mt-1"><!></p></div></div></div>'),zt=u('<p class="text-xs text-yellow-600"> </p>'),Lt=u('<div class="p-4 bg-yellow-50 rounded-lg border border-yellow-200"><div class="flex items-center justify-between mb-2"><span class="text-sm font-medium text-yellow-800">我的收藏夹</span> <!></div> <!></div>'),Et=u("<option> </option>"),Ft=u('<div class="space-y-2"><!> <select id="collection-type" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"></select> <p class="text-sm text-orange-600">⚠️ 手动输入合集ID时需要指定类型，建议从右侧合集列表中选择</p></div>'),qt=u('<p class="text-xs text-green-600 mt-1">✓ 已获取合集列表，请在右侧选择</p>'),Ot=u('<div class="space-y-2"><!> <!> <!></div>'),Nt=u('<p class="text-xs text-green-600 mt-1">✓ 已从列表中选择合集，类型已自动识别</p>'),Wt=u('<p class="text-xs text-green-600 mt-1">✓ 已选择收藏夹</p>'),At=(se,K,A)=>{e(K)&&n(A,[])},Ht=u('<p class="text-xs text-purple-600 mt-1 ml-6">勾选后将下载该番剧的所有季度，无需单独选择</p>'),Vt=u('<p class="text-xs text-purple-600 mt-1 ml-6">请在右侧选择要下载的季度</p>'),Kt=u('<div class="flex items-center space-x-2 mt-3"><input type="checkbox" id="download-all-seasons" class="h-4 w-4 rounded border-gray-300 text-primary focus:ring-primary"/> <!></div> <!>',1),Xt=u('<div class="space-y-2"><!> <!> <!> <!> <!></div>'),Yt=(se,K,A,d,N,Z)=>{n(K,!1),n(A,[]),n(d,0),n(N,1),n(Z,0)},Gt=(se,K,A)=>K(e(A)),Jt=u('<img loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),Qt=u("<div>无图片</div>"),Zt=u('<p class="text-xs text-gray-500 line-clamp-2 mt-1 svelte-1xrdbru"> </p>'),er=u('<button class="p-4 hover:bg-gray-50 border rounded-lg flex gap-3 text-left transition-colors items-start relative"><!> <div class="flex-1 min-w-0"><h4 class="font-medium text-sm truncate"><!></h4> <p class="text-xs text-gray-600 truncate mt-1"> </p> <!></div></button>'),ar=u('<div class="flex justify-center items-center gap-2 p-3 border-t"><!> <span class="text-sm text-gray-600"> </span> <!></div>'),tr=u('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-gray-50"><div><span class="text-base font-medium">搜索结果</span> <span class="text-sm text-gray-600 ml-2"> </span></div> <button class="text-gray-500 hover:text-gray-700 text-xl p-1"><!></button></div> <div class="flex-1 overflow-y-auto p-3"><div class="grid grid-cols-3 gap-4"></div></div> <!></div></div>'),rr=(se,K,A)=>K(e(A)),sr=u('<img class="w-24 h-16 object-cover rounded flex-shrink-0" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),ir=u('<div class="w-24 h-16 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400 flex-shrink-0">无封面</div>'),or=u('<p class="text-xs text-gray-500 line-clamp-2 mt-1 svelte-1xrdbru"> </p>'),lr=u('<button class="p-4 hover:bg-gray-50 border rounded-lg text-left transition-colors"><div class="flex items-start gap-3"><!> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><h4 class="font-medium text-sm truncate"> </h4> <span> </span></div> <p class="text-xs text-gray-600 mb-1"> </p> <p class="text-xs text-gray-600"> </p> <!></div></div></button>'),nr=u('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-green-50"><div><span class="text-base font-medium text-green-800">UP主合集列表</span> <span class="text-sm text-green-600 ml-2"> </span></div></div> <div class="flex-1 overflow-y-auto p-3"><div class="grid grid-cols-2 gap-4"></div></div></div></div>'),vr=(se,K,A)=>K(e(A)),dr=u('<img class="w-24 h-16 object-cover rounded flex-shrink-0" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),cr=u('<div class="w-24 h-16 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400 flex-shrink-0">无封面</div>'),_r=u('<p class="text-xs text-gray-500"> </p>'),pr=u('<button class="p-4 hover:bg-gray-50 border rounded-lg text-left transition-colors"><div class="flex items-start gap-3"><!> <div class="flex-1 min-w-0"><h4 class="font-medium text-sm truncate mb-1"> </h4> <p class="text-xs text-gray-600 mb-1"> </p> <p class="text-xs text-gray-600 mb-1"> </p> <!></div></div></button>'),ur=u('<div class="flex-1"><div class="bg-white rounded-lg border h-full overflow-hidden flex flex-col sticky top-6 max-h-[calc(100vh-200px)]"><div class="flex justify-between items-center p-4 border-b bg-yellow-50"><div><span class="text-base font-medium text-yellow-800">我的收藏夹</span> <span class="text-sm text-yellow-600 ml-2"> </span></div></div> <div class="flex-1 overflow-y-auto p-3"><div class="grid grid-cols-2 gap-4"></div></div></div></div>'),fr=u('<span class="text-xs text-purple-700 bg-purple-100 px-2 py-1 rounded"> <!></span>'),xr=u('<p class="text-xs text-purple-600 mt-1">不选择则仅下载左侧输入的当前季度</p>'),mr=u('<div class="p-4 text-center"><div class="text-sm text-purple-700">正在加载季度信息...</div></div>'),gr=(se,K,A)=>K(e(A).season_id),hr=u('<span class="text-xs bg-purple-100 text-purple-700 px-1.5 py-0.5 rounded">当前</span>'),br=u('<div class="text-xs text-gray-600 mb-1"> </div>'),yr=u('<img class="w-12 h-16 object-cover rounded flex-shrink-0" loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),wr=u('<div class="w-12 h-16 bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400 flex-shrink-0">无封面</div>'),$r=u('<label><input type="checkbox" class="mt-1 h-4 w-4 rounded border-gray-300 text-purple-600 focus:ring-purple-500"/> <div class="flex-1 min-w-0"><div class="flex items-center gap-2 mb-1"><span class="font-medium text-sm text-gray-900"> </span> <!></div> <!> <div class="text-xs text-gray-500"> <!></div></div> <!></label>'),kr=u('<div class="p-2"></div>'),Pr=u('<div class="p-4 text-center"><div class="text-sm text-gray-500">暂无季度信息</div> <div class="text-xs text-gray-400 mt-1">请检查Season ID是否正确</div></div>'),Ir=u('<div class="w-[850px] bg-white rounded-lg border overflow-hidden flex flex-col max-h-[calc(100vh-300px)]"><div class="p-3 border-b bg-purple-50"><div class="flex items-center justify-between"><div><span class="text-sm font-medium text-purple-800">选择要下载的季度</span> <span class="text-xs text-purple-600 ml-2"><!></span></div> <!></div> <!></div> <div class="flex-1 overflow-y-auto"><!></div></div>'),Dr=u('<img loading="lazy" crossorigin="anonymous" referrerpolicy="no-referrer"/>'),Ur=u("<div>无图片</div>"),Sr=u('<p class="text-xs text-gray-500 line-clamp-4 mb-2 svelte-1xrdbru"> </p>'),Tr=u('<span class="flex items-center gap-1 text-gray-500"><span>▶</span> </span>'),jr=u('<span class="flex items-center gap-1 text-gray-500"><span>💬</span> </span>'),Br=u('<span class="text-gray-500"> </span>'),Cr=u('<span class="text-gray-500"> </span>'),Mr=u('<div class="fixed z-50 bg-white rounded-lg shadow-2xl border p-4 max-w-md pointer-events-none"><div class="flex gap-4"><!> <div class="flex-1 min-w-0"><h4 class="font-semibold text-sm mb-1"><!></h4> <p class="text-xs text-gray-600 mb-2"> </p> <!> <div class="flex flex-wrap gap-2 text-xs"><!> <!> <!> <!></div></div></div></div>'),Rr=u('<div class="py-2"><div class="mx-auto px-4"><div class="bg-card rounded-lg shadow-sm border p-6"><h1 class="text-2xl font-bold mb-6">添加新视频源</h1> <div class="flex gap-8"><div class="w-[600px] flex-shrink-0"><form class="space-y-6"><div class="space-y-2"><!> <select id="source-type" class="flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2"></select> <p class="text-sm text-muted-foreground"> </p></div> <!> <!> <!> <!> <!> <div class="space-y-2"><!> <!></div> <div class="space-y-2"><!> <!> <p class="text-sm text-muted-foreground">请输入绝对路径</p></div> <div class="flex gap-2"><!> <!></div></form></div> <!> <!> <!> <!></div></div></div></div> <!>',1);function Vr(se,K){yt(K,!1);const A=F();let d=F("collection"),N=F(""),Z=F(""),G=F(""),oe=F(""),J=F("season"),le=F(!1),ne=F(!1),te=F(!1),fe=F(""),xe=F(!1),we=F([]),Ue=F(!1),de=F(1),me=F(0),Se=F(0),_e=F([]),Te=F(!1),ce=F([]),Le,ee=F([]),$e=F(!1),Q=F([]),Da,q=F(null),Ua,Ee=F({x:0,y:0});const Xe=[{value:"collection",label:"合集",description:"视频合集，需要UP主ID和合集ID"},{value:"favorite",label:"收藏夹",description:"收藏夹ID可在收藏夹页面URL中获取"},{value:"submission",label:"UP主投稿",description:"UP主ID可在UP主空间URL中获取"},{value:"watch_later",label:"稍后观看",description:"同步稍后观看列表"},{value:"bangumi",label:"番剧",description:"番剧season_id可在番剧页面URL中获取"}],Sa=[{value:"season",label:"合集",description:"B站标准合集"},{value:"series",label:"系列",description:"视频系列"}];wt(()=>{Dt([{label:"主页",href:"/"},{label:"添加视频源",isActive:!0}])}),$t(()=>{clearTimeout(Ua),clearTimeout(Le),clearTimeout(Da)});async function je(a=1){if(!e(fe).trim()){V.error("请输入搜索关键词");return}let i;switch(e(d)){case"collection":case"submission":i="bili_user";break;case"bangumi":i="media_bangumi";break;default:i="video";break}n(xe,!0);try{const v=await Ie.searchBilibili({keyword:e(fe),search_type:i,page:a,page_size:12});v.data.success?(n(we,v.data.results),n(de,a),n(me,Math.ceil(v.data.total/12)),n(Se,v.data.total),n(Ue,!0)):V.error("搜索失败")}catch(v){console.error("搜索失败:",v),V.error("搜索失败",{description:v.message})}finally{n(xe,!1)}}function Ta(a){switch(e(d)){case"collection":a.mid&&(n(Z,a.mid.toString()),Ye(),V.success("已填充UP主信息",{description:"正在获取合集列表..."}));break;case"submission":a.mid&&(n(N,a.mid.toString()),n(G,Fe(a.title)));break;case"bangumi":a.season_id&&(n(N,a.season_id),n(G,Fe(a.title)));break;case"favorite":default:a.bvid&&(n(N,a.bvid),n(G,Fe(a.title)));break}n(Ue,!1),n(we,[]),n(fe,""),n(Se,0),n(de,1),n(me,0),n(q,null),e(d)!=="collection"&&V.success("已填充信息",{description:"请检查并完善其他必要信息"})}function Fe(a){const i=document.createElement("div");return i.innerHTML=a,i.textContent||i.innerText||a}function ke(a){return a?a.startsWith("https://")?a:a.startsWith("//")?"https:"+a:a.startsWith("http://")?a.replace("http://","https://"):a.startsWith("http")?a.split("@")[0]:"https://"+a:""}function Be(a){var y,P;const i=a.target;i.style.display="none";const v=i.parentElement;if(v&&!v.querySelector(".placeholder")){const U=document.createElement("div"),w=((y=i.className.match(/w-\d+/))==null?void 0:y[0])||"w-20",S=((P=i.className.match(/h-\d+/))==null?void 0:P[0])||"h-14";U.className=`placeholder ${w} ${S} bg-gray-200 rounded flex items-center justify-center text-xs text-gray-400`,U.textContent="无图片",v.appendChild(U)}}async function ja(){if(e(d)!=="watch_later"&&!e(N)){V.error("请输入ID");return}if(e(d)==="collection"&&!e(Z)){V.error("请输入UP主ID");return}if(!e(G)){V.error("请输入名称");return}if(!e(oe)){V.error("请输入保存路径");return}n(ne,!0);try{const a={source_type:e(d),source_id:e(N),name:e(G),path:e(oe)};e(d)==="collection"&&(a.up_id=e(Z),a.collection_type=e(J)),e(d)==="bangumi"&&(a.download_all_seasons=e(le),e(Q).length>0&&!e(le)&&(a.selected_seasons=e(Q)));const i=await Ie.addVideoSource(a);i.data.success?(V.success("添加成功",{description:i.data.message}),Pa("/")):V.error("添加失败",{description:i.data.message})}catch(a){console.error("添加视频源失败:",a),V.error("添加失败",{description:a.message})}finally{n(ne,!1)}}async function Ba(){n(Te,!0);try{const a=await Ie.getUserFavorites();n(_e,a.data),e(_e).length===0&&V.info("暂无收藏夹")}catch(a){console.error("获取收藏夹失败:",a),V.error("获取收藏夹失败",{description:a.message}),n(_e,[])}finally{n(Te,!1)}}function Ca(a){n(N,a.id.toString()),n(G,a.name||a.title),V.success("已选择收藏夹",{description:e(G)})}function Ye(){clearTimeout(Le),e(Z).trim()?Le=setTimeout(()=>{Ma()},500):n(ce,[])}async function Ma(){if(e(Z).trim())try{const a=await Ie.getUserCollections(e(Z));a.data.success?(n(ce,a.data.collections),e(ce).length===0&&V.info("该UP主暂无合集")):(V.error("获取合集列表失败"),n(ce,[]))}catch(a){console.error("获取合集列表失败:",a),V.error("获取合集列表失败",{description:a.message}),n(ce,[])}finally{}}function Ra(a){n(N,a.sid),n(G,a.name),n(J,a.collection_type),n(te,!1),V.success("已选择合集",{description:`${a.collection_type==="season"?"合集":"系列"}：${a.name}`})}async function za(){if(!(!e(N).trim()||e(d)!=="bangumi")){n($e,!0);try{const a=await Ie.getBangumiSeasons(e(N));if(a.data&&a.data.success){if(n(ee,a.data.data||[]),e(ee).length>0){const i=e(ee).find(v=>v.season_id===e(N));i&&n(Q,[i.season_id])}}else n(ee,[])}catch(a){console.error("获取季度信息失败:",a),V.error("获取季度信息失败",{description:a.message}),n(ee,[]),n(Q,[])}finally{n($e,!1)}}}function La(a){e(Q).indexOf(a)===-1?n(Q,[...e(Q),a]):n(Q,e(Q).filter(v=>v!==a))}function Ea(a,i){n(q,a),Ge(i)}function Ge(a){const i=a.pageX+20,v=a.pageY-100;n(Ee,{x:Math.max(10,i),y:Math.max(10,v)})}function Fa(){n(q,null)}ze(()=>e(d),()=>{var a;n(A,((a=Xe.find(i=>i.value===e(d)))==null?void 0:a.description)||"")}),ze(()=>e(d),()=>{e(d)!=="bangumi"&&(n(ee,[]),n(Q,[]))}),ze(()=>e(d),()=>{e(d)&&n(te,!1)}),ze(()=>(e(d),e(N)),()=>{e(d)==="bangumi"&&e(N)&&za()}),kt(),ut();var Je=Rr();pt(a=>{It.title="添加视频源 - Bili Sync"});var qe=Pe(Je),Qe=r(qe),Ze=r(Qe),ea=o(r(Ze),2),Oe=r(ea),Ne=r(Oe),We=r(Ne),aa=r(We);pe(aa,{for:"source-type",children:(a,i)=>{re();var v=B("视频源类型");s(a,v)},$$slots:{default:!0}});var Ce=o(aa,2);k(()=>{e(d),wa(()=>{})}),ge(Ce,5,()=>Xe,be,(a,i)=>{var v=Mt(),y={},P=r(v,!0);t(v),k(()=>{y!==(y=e(i).value)&&(v.value=(v.__value=e(i).value)??""),j(P,e(i).label)}),s(a,v)}),t(Ce);var ta=o(Ce,2),qa=r(ta,!0);t(ta),t(We);var ra=o(We,2);{var Oa=a=>{var i=Rt(),v=r(i),y=r(v),P=r(y);pe(P,{for:"search",children:(m,M)=>{var z=Ke(),p=Pe(z);{var g=h=>{var f=B("搜索UP主");s(h,f)},b=(h,f)=>{{var l=x=>{var T=B("搜索UP主");s(x,T)},c=(x,T)=>{{var $=C=>{var E=B("搜索番剧");s(C,E)},R=C=>{var E=B("搜索B站内容");s(C,E)};_(x,C=>{e(d)==="bangumi"?C($):C(R,!1)},T)}};_(h,x=>{e(d)==="submission"?x(l):x(c,!1)},f)}};_(p,h=>{e(d)==="collection"?h(g):h(b,!1)})}s(m,z)},$$slots:{default:!0}});var U=o(P,2),w=r(U);const S=ae(()=>e(d)==="submission"||e(d)==="collection"?"搜索UP主...":e(d)==="bangumi"?"搜索番剧...":"搜索视频...");De(w,{id:"search",get placeholder(){return e(S)},onkeydown:m=>m.key==="Enter"&&je(),get value(){return e(fe)},set value(m){n(fe,m)},$$legacy:!0});var O=o(w,2);const X=ae(()=>e(xe)||!e(fe).trim());he(O,{onclick:()=>je(),get disabled(){return e(X)},size:"sm",children:(m,M)=>{var z=Ke(),p=Pe(z);{var g=h=>{var f=B("搜索中...");s(h,f)},b=h=>{jt(h,{class:"h-4 w-4"})};_(p,h=>{e(xe)?h(g):h(b,!1)})}s(m,z)},$$slots:{default:!0}}),t(U);var I=o(U,2),D=r(I);{var W=m=>{var M=B("搜索UP主后会自动填充UP主ID，并显示该UP主的所有合集供选择");s(m,M)},L=(m,M)=>{{var z=g=>{var b=B("搜索并选择UP主，将自动填充UP主ID");s(g,b)},p=(g,b)=>{{var h=l=>{var c=B("搜索并选择番剧，将自动填充Season ID");s(l,c)},f=l=>{var c=B("根据当前选择的视频源类型搜索对应内容");s(l,c)};_(g,l=>{e(d)==="bangumi"?l(h):l(f,!1)},b)}};_(m,g=>{e(d)==="submission"?g(z):g(p,!1)},M)}};_(D,m=>{e(d)==="collection"?m(W):m(L,!1)})}t(I),t(y),t(v),t(i),s(a,i)};_(ra,a=>{e(d)!=="favorite"&&e(d)!=="watch_later"&&a(Oa)})}var sa=o(ra,2);{var Na=a=>{var i=Lt(),v=r(i),y=o(r(v),2);he(y,{size:"sm",variant:"outline",onclick:Ba,get disabled(){return e(Te)},children:(w,S)=>{re();var O=B();k(()=>j(O,e(Te)?"加载中...":"获取收藏夹")),s(w,O)},$$slots:{default:!0}}),t(v);var P=o(v,2);{var U=w=>{var S=zt(),O=r(S);t(S),k(()=>j(O,`已获取 ${e(_e).length??""} 个收藏夹，请在右侧选择`)),s(w,S)};_(P,w=>{e(_e).length>0&&w(U)})}t(i),s(a,i)};_(sa,a=>{e(d)==="favorite"&&a(Na)})}var ia=o(sa,2);{var Wa=a=>{var i=Ft(),v=r(i);pe(v,{for:"collection-type",children:(P,U)=>{re();var w=B("合集类型");s(P,w)},$$slots:{default:!0}});var y=o(v,2);k(()=>{e(J),wa(()=>{})}),ge(y,5,()=>Sa,be,(P,U)=>{var w=Et(),S={},O=r(w,!0);t(w),k(()=>{S!==(S=e(U).value)&&(w.value=(w.__value=e(U).value)??""),j(O,e(U).label)}),s(P,w)}),t(y),re(2),t(i),$a(y,()=>e(J),P=>n(J,P)),s(a,i)};_(ia,a=>{e(d)==="collection"&&e(te)&&a(Wa)})}var oa=o(ia,2);{var Aa=a=>{var i=Ot(),v=r(i);pe(v,{for:"up-id",children:(w,S)=>{re();var O=B("UP主ID");s(w,O)},$$slots:{default:!0}});var y=o(v,2);De(y,{id:"up-id",placeholder:"请输入UP主ID",onblur:Ye,required:!0,get value(){return e(Z)},set value(w){n(Z,w)},$$legacy:!0});var P=o(y,2);{var U=w=>{var S=qt();s(w,S)};_(P,w=>{e(ce).length>0&&w(U)})}t(i),s(a,i)};_(oa,a=>{e(d)==="collection"&&a(Aa)})}var la=o(oa,2);{var Ha=a=>{var i=Xt(),v=r(i);pe(v,{for:"source-id",children:(D,W)=>{var L=Ke(),m=Pe(L);{var M=p=>{var g=B("合集ID");s(p,g)},z=(p,g)=>{{var b=f=>{var l=B("收藏夹ID");s(f,l)},h=(f,l)=>{{var c=T=>{var $=B("UP主ID");s(T,$)},x=(T,$)=>{{var R=E=>{var ie=B("Season ID");s(E,ie)},C=E=>{var ie=B("ID");s(E,ie)};_(T,E=>{e(d)==="bangumi"?E(R):E(C,!1)},$)}};_(f,T=>{e(d)==="submission"?T(c):T(x,!1)},l)}};_(p,f=>{e(d)==="favorite"?f(b):f(h,!1)},g)}};_(m,p=>{e(d)==="collection"?p(M):p(z,!1)})}s(D,L)},$$slots:{default:!0}});var y=o(v,2);const P=ae(()=>`请输入${e(d)==="collection"?"合集":e(d)==="favorite"?"收藏夹":e(d)==="submission"?"UP主":e(d)==="bangumi"?"Season":""}ID`);De(y,{id:"source-id",get placeholder(){return e(P)},oninput:()=>{e(d)==="collection"&&n(te,!0)},required:!0,get value(){return e(N)},set value(D){n(N,D)},$$legacy:!0});var U=o(y,2);{var w=D=>{var W=Nt();s(D,W)};_(U,D=>{e(d)==="collection"&&!e(te)&&e(N)&&D(w)})}var S=o(U,2);{var O=D=>{var W=Wt();s(D,W)};_(S,D=>{e(d)==="favorite"&&e(N)&&D(O)})}var X=o(S,2);{var I=D=>{var W=Kt(),L=Pe(W),m=r(L);ka(m),m.__change=[At,le,Q];var M=o(m,2);pe(M,{for:"download-all-seasons",class:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:(b,h)=>{re();var f=B("下载所有季度");s(b,f)},$$slots:{default:!0}}),t(L);var z=o(L,2);{var p=b=>{var h=Ht();s(b,h)},g=(b,h)=>{{var f=l=>{var c=Vt();s(l,c)};_(b,l=>{e(ee).length>0&&l(f)},h)}};_(z,b=>{e(le)?b(p):b(g,!1)})}Tt(m,()=>e(le),b=>n(le,b)),s(D,W)};_(X,D=>{e(d)==="bangumi"&&D(I)})}t(i),s(a,i)};_(la,a=>{e(d)!=="watch_later"&&a(Ha)})}var Ae=o(la,2),na=r(Ae);pe(na,{for:"name",children:(a,i)=>{re();var v=B("名称");s(a,v)},$$slots:{default:!0}});var Va=o(na,2);De(Va,{id:"name",placeholder:"请输入视频源名称",required:!0,get value(){return e(G)},set value(a){n(G,a)},$$legacy:!0}),t(Ae);var He=o(Ae,2),va=r(He);pe(va,{for:"path",children:(a,i)=>{re();var v=B("保存路径");s(a,v)},$$slots:{default:!0}});var Ka=o(va,2);De(Ka,{id:"path",placeholder:"例如：D:/Videos/Bilibili",required:!0,get value(){return e(oe)},set value(a){n(oe,a)},$$legacy:!0}),re(2),t(He);var da=o(He,2),ca=r(da);he(ca,{type:"submit",get disabled(){return e(ne)},children:(a,i)=>{re();var v=B();k(()=>j(v,e(ne)?"添加中...":"添加")),s(a,v)},$$slots:{default:!0}});var Xa=o(ca,2);he(Xa,{type:"button",variant:"outline",onclick:()=>Pa("/"),children:(a,i)=>{re();var v=B("取消");s(a,v)},$$slots:{default:!0}}),t(da),t(Ne),t(Oe);var _a=o(Oe,2);{var Ya=a=>{var i=tr(),v=r(i),y=r(v),P=r(y),U=o(r(P),2),w=r(U);t(U),t(P);var S=o(P,2);S.__click=[Yt,Ue,we,Se,de,me];var O=r(S);Bt(O,{class:"h-5 w-5"}),t(S),t(y);var X=o(y,2),I=r(X);ge(I,5,()=>e(we),be,(L,m)=>{var M=er();M.__click=[Gt,Ta,m],M.__mousemove=[Ct,q,Ge];var z=r(M);{var p=$=>{var R=Jt();k(C=>{ve(R,"src",C),ve(R,"alt",e(m).title),ye(R,1,`${e(d)==="bangumi"?"w-14 h-20":"w-20 h-14"} object-cover rounded flex-shrink-0`)},[()=>ke(e(m).cover)],ae),ue("error",R,Be),Me(R),s($,R)},g=$=>{var R=Qt();k(()=>ye(R,1,`${e(d)==="bangumi"?"w-14 h-20":"w-20 h-14"} bg-gray-200 rounded flex items-center justify-center text-xs text-gray-600 flex-shrink-0`)),s($,R)};_(z,$=>{e(m).cover?$(p):$(g,!1)})}var b=o(z,2),h=r(b),f=r(h);Ia(f,()=>e(m).title),t(h);var l=o(h,2),c=r(l,!0);t(l);var x=o(l,2);{var T=$=>{var R=Zt(),C=r(R,!0);t(R),k(()=>j(C,e(m).description)),s($,R)};_(x,$=>{e(m).description&&$(T)})}t(b),t(M),k(()=>j(c,e(m).author)),ue("mouseenter",M,$=>Ea(e(m),$)),ue("mouseleave",M,Fa),s(L,M)}),t(I),t(X);var D=o(X,2);{var W=L=>{var m=ar(),M=r(m);const z=ae(()=>e(de)<=1||e(xe));he(M,{size:"sm",variant:"outline",onclick:()=>je(e(de)-1),get disabled(){return e(z)},children:(f,l)=>{re();var c=B("上一页");s(f,c)},$$slots:{default:!0}});var p=o(M,2),g=r(p);t(p);var b=o(p,2);const h=ae(()=>e(de)>=e(me)||e(xe));he(b,{size:"sm",variant:"outline",onclick:()=>je(e(de)+1),get disabled(){return e(h)},children:(f,l)=>{re();var c=B("下一页");s(f,c)},$$slots:{default:!0}}),t(m),k(()=>j(g,`${e(de)??""} / ${e(me)??""}`)),s(L,m)};_(D,L=>{e(me)>1&&L(W)})}t(v),t(i),k(()=>j(w,`共找到 ${e(Se)??""} 个结果，当前第 ${e(de)??""} 页`)),s(a,i)};_(_a,a=>{e(Ue)&&e(we).length>0&&a(Ya)})}var pa=o(_a,2);{var Ga=a=>{var i=nr(),v=r(i),y=r(v),P=r(y),U=o(r(P),2),w=r(U);t(U),t(P),t(y);var S=o(y,2),O=r(S);ge(O,5,()=>e(ce),be,(X,I)=>{var D=lr();D.__click=[rr,Ra,I];var W=r(D),L=r(W);{var m=C=>{var E=sr();k(ie=>{ve(E,"src",ie),ve(E,"alt",e(I).name)},[()=>ke(e(I).cover)],ae),ue("error",E,Be),Me(E),s(C,E)},M=C=>{var E=ir();s(C,E)};_(L,C=>{e(I).cover?C(m):C(M,!1)})}var z=o(L,2),p=r(z),g=r(p),b=r(g,!0);t(g);var h=o(g,2),f=r(h,!0);t(h),t(p);var l=o(p,2),c=r(l);t(l);var x=o(l,2),T=r(x);t(x);var $=o(x,2);{var R=C=>{var E=or(),ie=r(E,!0);t(E),k(()=>j(ie,e(I).description)),s(C,E)};_($,C=>{e(I).description&&C(R)})}t(z),t(W),t(D),k(()=>{j(b,e(I).name),ye(h,1,`text-xs px-2 py-0.5 rounded flex-shrink-0 ${e(I).collection_type==="season"?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`),j(f,e(I).collection_type==="season"?"合集":"系列"),j(c,`ID: ${e(I).sid??""}`),j(T,`共 ${e(I).total??""} 个视频`)}),s(X,D)}),t(O),t(S),t(v),t(i),k(()=>j(w,`共 ${e(ce).length??""} 个合集`)),s(a,i)};_(pa,a=>{e(d)==="collection"&&e(ce).length>0&&a(Ga)})}var ua=o(pa,2);{var Ja=a=>{var i=ur(),v=r(i),y=r(v),P=r(y),U=o(r(P),2),w=r(U);t(U),t(P),t(y);var S=o(y,2),O=r(S);ge(O,5,()=>e(_e),be,(X,I)=>{var D=pr();D.__click=[vr,Ca,I];var W=r(D),L=r(W);{var m=T=>{var $=dr();k(R=>{ve($,"src",R),ve($,"alt",e(I).name||e(I).title)},[()=>ke(e(I).cover)],ae),ue("error",$,Be),Me($),s(T,$)},M=T=>{var $=cr();s(T,$)};_(L,T=>{e(I).cover?T(m):T(M,!1)})}var z=o(L,2),p=r(z),g=r(p,!0);t(p);var b=o(p,2),h=r(b);t(b);var f=o(b,2),l=r(f);t(f);var c=o(f,2);{var x=T=>{var $=_r(),R=r($);t($),k(C=>j(R,`创建于 ${C??""}`),[()=>new Date(e(I).created*1e3).toLocaleDateString()],ae),s(T,$)};_(c,T=>{e(I).created&&T(x)})}t(z),t(W),t(D),k(()=>{j(g,e(I).name||e(I).title),j(h,`收藏夹ID: ${e(I).id??""}`),j(l,`共 ${e(I).media_count??""} 个视频`)}),s(X,D)}),t(O),t(S),t(v),t(i),k(()=>j(w,`共 ${e(_e).length??""} 个收藏夹`)),s(a,i)};_(ua,a=>{e(d)==="favorite"&&e(_e).length>0&&a(Ja)})}var Qa=o(ua,2);{var Za=a=>{var i=Ir(),v=r(i),y=r(v),P=r(y),U=o(r(P),2),w=r(U);{var S=p=>{var g=B("正在加载...");s(p,g)},O=(p,g)=>{{var b=f=>{var l=B();k(()=>j(l,`共找到 ${e(ee).length??""} 个相关季度`)),s(f,l)},h=f=>{var l=B("暂无季度信息");s(f,l)};_(p,f=>{e(ee).length>0?f(b):f(h,!1)},g)}};_(w,p=>{e($e)?p(S):p(O,!1)})}t(U),t(P);var X=o(P,2);{var I=p=>{var g=fr(),b=r(g),h=o(b);{var f=l=>{var c=B("（全部）");s(l,c)};_(h,l=>{e(Q).length===e(ee).length&&l(f)})}t(g),k(()=>j(b,`已选择 ${e(Q).length??""} 个 `)),s(p,g)};_(X,p=>{e(Q).length>0&&p(I)})}t(y);var D=o(y,2);{var W=p=>{var g=xr();s(p,g)};_(D,p=>{!e($e)&&e(ee).length>0&&p(W)})}t(v);var L=o(v,2),m=r(L);{var M=p=>{var g=mr();s(p,g)},z=(p,g)=>{{var b=f=>{var l=kr();ge(l,5,()=>e(ee),be,(c,x,T)=>{var $=$r(),R=r($);ka(R),R.__change=[gr,La,x];var C=o(R,2),E=r(C),ie=r(E),tt=r(ie,!0);t(ie);var rt=o(ie,2);{var st=H=>{var Y=hr();s(H,Y)};_(rt,H=>{e(x).season_id===e(N)&&H(st)})}t(E);var fa=o(E,2);{var it=H=>{var Y=br(),Ve=r(Y,!0);t(Y),k(()=>j(Ve,e(x).full_title)),s(H,Y)};_(fa,H=>{e(x).full_title&&e(x).full_title!==e(x).season_title&&H(it)})}var xa=o(fa,2),ma=r(xa),ot=o(ma);{var lt=H=>{var Y=B();k(()=>j(Y,`| Media ID: ${e(x).media_id??""}`)),s(H,Y)};_(ot,H=>{e(x).media_id&&H(lt)})}t(xa),t(C);var nt=o(C,2);{var vt=H=>{var Y=yr();k(Ve=>{ve(Y,"src",Ve),ve(Y,"alt",e(x).season_title)},[()=>ke(e(x).cover)],ae),ue("error",Y,Be),Me(Y),s(H,Y)},dt=H=>{var Y=wr();s(H,Y)};_(nt,H=>{e(x).cover?H(vt):H(dt,!1)})}t($),k(H=>{ye($,1,`flex items-start gap-2 p-2 hover:bg-purple-50 ${T<e(ee).length-1?"border-b":""} cursor-pointer transition-colors`),St(R,H),j(tt,e(x).season_title||e(x).title),j(ma,`Season ID: ${e(x).season_id??""} `)},[()=>e(Q).includes(e(x).season_id)],ae),s(c,$)}),t(l),s(f,l)},h=(f,l)=>{{var c=x=>{var T=Pr();s(x,T)};_(f,x=>{e(N)&&x(c)},l)}};_(p,f=>{e(ee).length>0?f(b):f(h,!1)},g)}};_(m,p=>{e($e)?p(M):p(z,!1)})}t(L),t(i),s(a,i)};_(Qa,a=>{e(d)==="bangumi"&&e(N)&&!e(le)&&a(Za)})}t(ea),t(Ze),t(Qe),t(qe);var et=o(qe,2);{var at=a=>{var i=Mr(),v=r(i),y=r(v);{var P=l=>{var c=Dr();k(x=>{ve(c,"src",x),ve(c,"alt",e(q).title),ye(c,1,`${e(d)==="bangumi"?"w-24 h-32":"w-32 h-20"} object-cover rounded flex-shrink-0`)},[()=>ke(e(q).cover)],ae),s(l,c)},U=l=>{var c=Ur();k(()=>ye(c,1,`${e(d)==="bangumi"?"w-24 h-32":"w-32 h-20"} bg-gray-200 rounded flex items-center justify-center text-sm text-gray-400 flex-shrink-0`)),s(l,c)};_(y,l=>{e(q).cover?l(P):l(U,!1)})}var w=o(y,2),S=r(w),O=r(S);Ia(O,()=>e(q).title),t(S);var X=o(S,2),I=r(X);t(X);var D=o(X,2);{var W=l=>{var c=Sr(),x=r(c,!0);t(c),k(()=>j(x,e(q).description)),s(l,c)};_(D,l=>{e(q).description&&l(W)})}var L=o(D,2),m=r(L);{var M=l=>{var c=Tr(),x=o(r(c));t(c),k(T=>j(x,` 播放：${T??""}`),[()=>e(q).play>1e4?(e(q).play/1e4).toFixed(1)+"万":e(q).play],ae),s(l,c)};_(m,l=>{e(q).play&&l(M)})}var z=o(m,2);{var p=l=>{var c=jr(),x=o(r(c));t(c),k(T=>j(x,` 弹幕：${T??""}`),[()=>e(q).danmaku>1e4?(e(q).danmaku/1e4).toFixed(1)+"万":e(q).danmaku],ae),s(l,c)};_(z,l=>{e(q).danmaku&&l(p)})}var g=o(z,2);{var b=l=>{var c=Br(),x=r(c);t(c),k(()=>j(x,`Season ID: ${e(q).season_id??""}`)),s(l,c)};_(g,l=>{e(d)==="bangumi"&&e(q).season_id&&l(b)})}var h=o(g,2);{var f=l=>{var c=Cr(),x=r(c);t(c),k(()=>j(x,`BV号: ${e(q).bvid??""}`)),s(l,c)};_(h,l=>{e(q).bvid&&l(f)})}t(L),t(w),t(v),t(i),k(()=>{Ut(i,`left: ${e(Ee).x??""}px; top: ${e(Ee).y??""}px;`),j(I,`作者：${e(q).author??""}`)}),s(a,i)};_(et,a=>{e(q)&&a(at)})}k(()=>j(qa,e(A))),ue("submit",Ne,a=>{a.preventDefault(),ja()}),$a(Ce,()=>e(d),a=>n(d,a)),s(se,Je),Pt()}_t(["change","click","mousemove"]);export{Vr as component};
