# 版本对比：v2.5.1 vs v2.6.2

本文档详细对比了 `bili-sync-main` (v2.5.1) 和 `bili-sync最新` (v2.6.2) 两个版本之间的主要差异。

## 📊 基本信息对比

| 项目 | v2.5.1 (main) | v2.6.2 (最新) | 变更说明 |
|------|---------------|---------------|----------|
| 版本号 | 2.5.1 | 2.6.2 | 重大版本升级 |
| Rust Edition | 2024 | 2021 | 回退到稳定版本 |
| 作者 | amtoaer | amtoaer, qq1582185982 | 新增贡献者 |
| README 大小 | 2.0KB (46行) | 13KB (268行) | 内容大幅扩展 |

## 🗂️ 项目结构差异

### 新增文件 (v2.6.2)
- ✅ `make.bat` / `make1.bat` - Windows 构建脚本 (8.8KB)
- ✅ `docker-compose.yml` - Docker Compose 配置 (1.3KB)
- ✅ `MIGRATION_GUIDE.md` - 配置迁移指南 (3.4KB)
- ✅ `.dockerignore` - Docker 忽略文件 (677B)
- ✅ `target/` - 构建输出目录

### 移除文件 (v2.6.2)
- ❌ `Justfile` - 使用 make.bat 替代

### 文档扩展 (v2.6.2)
新增大量更新日志和功能文档：
- `frontend-build-fix-2025-06-04.md`
- `comprehensive-update-2025-06-03.md`
- `bangumi-merge-fix.md`
- `update-log-2024-06.md`
- `update-log-2025-06.md`
- `risk-warning-feature.md`
- `task-control-optimization.md`
- `reset-function-fix.md`
- `artifacts-guide.md`
- `artifacts-screenshots-guide.md`
- `github-actions-build.md`
- `program-deploy-guide.md`
- `document-deploy-guide.md` (原 deploy-guide.md)

## 🔧 技术依赖变更

### 新增依赖 (v2.6.2)
```toml
glob = "0.3.1"           # 文件模式匹配
toml_edit = "0.22.22"    # TOML 文件编辑
```

### 依赖变更
```toml
# v2.5.1
built = { version = "0.7.7", features = ["git2", "chrono"] }

# v2.6.2  
built = { version = "0.7.7", features = ["chrono"] }  # 移除 git2
```

## 🎯 核心功能对比

### 视频源管理架构

| 功能 | v2.5.1 | v2.6.2 | 说明 |
|------|--------|--------|------|
| 配置方式 | 手动编辑 config.toml | Web UI + 数据库 | 革命性改进 |
| 收藏夹管理 | 手动输入ID | 自动列表选择 | 用户体验大幅提升 |
| UP主合集 | 不支持 | 完整支持 | 新增功能 |
| 番剧下载 | 基础支持 | 完整支持(单季/全季) | 功能增强 |
| 搜索界面 | 基础 | 网格布局+分页 | UI/UX 升级 |

### Web 管理界面

| 功能 | v2.5.1 | v2.6.2 | 说明 |
|------|--------|--------|------|
| 视频源添加 | 配置文件 | Web UI | 现代化管理 |
| 实时配置 | 需重启 | 热更新 | 操作便利性提升 |
| 错误处理 | 基础 | 智能提示 | 用户友好性提升 |
| 认证机制 | 基础 | Token 认证 | 安全性增强 |

## 🛠️ 开发体验对比

### 构建系统

| 项目 | v2.5.1 | v2.6.2 | 改进 |
|------|--------|--------|------|
| 构建工具 | Justfile | make.bat | Windows 兼容性 |
| 开发环境 | 手动设置 | 一键设置 | `make.bat setup` |
| 前端构建 | 手动 | 自动化 | 集成到构建流程 |
| Docker 支持 | 基础 | Compose 配置 | 部署简化 |

### 文档系统

| 项目 | v2.5.1 | v2.6.2 | 改进 |
|------|--------|--------|------|
| 文档数量 | 12个文件 | 30+个文件 | 内容丰富化 |
| 更新日志 | 无 | 详细的版本日志 | 变更可追溯 |
| 部署指南 | 基础 | 分离的部署指南 | 职责清晰 |
| 迁移指南 | 无 | 完整迁移文档 | 升级友好 |

## 🚀 新增特性汇总 (v2.6.2)

### 核心功能增强
1. **数据库驱动的视频源管理**
   - 所有视频源存储在 SQLite 数据库
   - Web UI 实时管理，无需编辑配置文件
   - 支持动态增删改查

2. **收藏夹智能管理**
   - 自动获取用户所有收藏夹
   - 解决大数字ID精度问题
   - 一键选择和添加

3. **UP主合集完整支持**
   - 输入UP主ID自动列出所有合集
   - 支持合集和系列两种类型
   - 一键选择添加到下载队列

4. **番剧下载增强**
   - 支持单季和全季下载模式
   - 智能番剧识别和分类
   - 完整的NFO文件生成

5. **搜索体验革命**
   - 4×3网格布局显示
   - 支持分页浏览
   - 实时缩略图预览
   - 主区域展示优化

### 技术架构升级
1. **API Token 认证**
   - 安全的管理页面访问控制
   - 支持Token验证和状态管理

2. **配置热更新**
   - 配置修改立即生效
   - 无需重启程序
   - 智能任务调度

3. **多线程下载优化**
   - 可视化配置下载参数
   - 支持大文件多线程下载
   - 智能下载策略

4. **错误处理改进**
   - 修复多个关键错误
   - 提升程序稳定性
   - 更友好的错误提示

### 开发工具改进
1. **Windows 构建支持**
   - `make.bat` 脚本支持
   - 一键环境设置
   - 自动化构建流程

2. **Docker 优化**
   - Docker Compose 配置
   - 多阶段构建
   - 健康检查支持

3. **文档系统升级**
   - VitePress 现代化文档
   - 详细的功能截图
   - 完整的部署指南

## 🔄 迁移建议

### 从 v2.5.1 升级到 v2.6.2

1. **备份现有配置**
   ```bash
   cp config.toml config.toml.backup
   ```

2. **查看迁移指南**
   - 详细阅读 `MIGRATION_GUIDE.md`
   - 了解配置变更内容

3. **使用新的构建系统**
   ```bash
   # Windows
   .\make.bat setup
   .\make.bat dev
   
   # 或继续使用传统方式
   cargo run
   ```

4. **重新配置视频源**
   - 访问 Web 管理界面
   - 通过 UI 重新添加视频源
   - 验证下载功能正常

## 🎯 推荐使用版本

**强烈推荐使用 v2.6.2 (bili-sync最新)**，原因：

1. **用户体验**：Web UI 管理比手动编辑配置文件更友好
2. **功能完整性**：支持更多视频源类型和下载模式
3. **稳定性**：修复了多个关键问题，程序更稳定
4. **可维护性**：数据库架构更易于维护和扩展
5. **文档完善**：提供详细的使用指南和故障排除

---

如有问题，请参考相应版本的文档或提交 Issue。 