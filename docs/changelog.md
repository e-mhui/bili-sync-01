# 更新记录

## v2.7.6 (2025-07-26)
### 新增功能
- **Server酱推送优化**: 完全重构推送通知系统，提升新视频识别准确性
  - 增强NewVideoInfo结构体，添加发布时间和集数信息字段
  - 改进新视频收集逻辑，通过数据库查询准确识别真正新增的视频
  - 优化推送内容格式，番剧按集数排序，其他视频按时间排序
  - 修复番剧推送时集数识别错误问题（如显示第5集为新但实际更新到第12集）

### 技术改进
- 统一时间处理逻辑，全面使用北京时间字符串格式
- 推送通知支持显示视频发布日期和番剧集数信息
- 新视频判定逻辑优化，避免重复推送已存在视频

## 2025-07-24
### 新增功能
- **扫描源顺序优化**: 新添加的源优先扫描，然后扫描旧源，提升扫描效率
- **风控断点续传**: 触发风控时保存扫描进度，下次扫描从断点继续
- **显示错误视频**: 视频管理页新增筛选错误视频功能，方便排查问题
- **强制重置功能**: 重置对话框区分"重置失败任务"和"强制重置所有"

### 界面优化
- **黑暗模式适配**: API Token登录页面完整支持黑暗模式
- **批量重置优化**: 明确区分重置失败任务和强制重置，避免误操作

### 系统优化
- **风控处理优化**: HTTP 412错误风控检测更加准确，支持源间延迟配置
- **扫描进度保存**: 修复进度保存时机，确保只有完全处理完的源才被记录
- **配置更新优化**: 新增延迟字段到API配置，提升系统稳定性

### 技术改进
- 扫描源ID跟踪功能，支持新旧源分组处理
- 扫描进度实时保存，避免程序异常退出时进度丢失
- 风控时延迟保存策略，确保断点续传的准确性

## 2025-07-23
- 修复番剧缓存未生效问题
- 番剧扫描速度提升 60 倍

## 2025-07-22  
- 添加番剧缓存机制（24小时）
- 新增缓存字段到数据库

## 2025-07-21
- 修复 QR 登录重复生成问题
- 优化登录流程

## 2025-07-20
- 优化视频元数据获取
- 修复封面图片路径问题

## 2025-07-19
- 改进错误处理机制
- 优化任务队列性能

## 更早版本
详见 [GitHub Releases](https://github.com/qq1582185982/bili-sync-01/releases)